require('dotenv').config({ path: '../../.env' });
const mongoose = require('mongoose');
const async = require('async');
const _ = require('underscore');

const beastSchema = require('../../schemes/beast');

const Beast = mongoose.model('Beast', beastSchema);

mongoose.connect('mongodb://localhost/wwa');

const beastsToDelete = [
  'ðŸ‘ÐœÑƒÑ‚Ð°Ð½Ñ‚ (Ð“Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ð¹)',
  'ðŸ‘ÐœÑƒÑ‚Ð°Ð½Ñ‚ (â—ï¸ÐžÐ³Ñ€Ð¾Ð¼Ð½Ñ‹Ð¹)',
  'ðŸ²Ð¢Ñ€Ð¾Ð³ (â—ï¸ÐžÐ³Ñ€Ð¾Ð¼Ð½Ñ‹Ð¹)',
  'ðŸ²Ð¢Ñ€Ð¾Ð³ (ðŸ’™Ð›ÐµÐ¾Ð½Ð°Ñ€Ð´Ð¾)',
  'ðŸ²Ð¢Ñ€Ð¾Ð³ (ðŸ’›ÐœÐ¸ÐºÐµÐ»Ð°Ð½Ð´Ð¶ÐµÐ»Ð¾)',
  'ðŸ²Ð¢Ñ€Ð¾Ð³ (ðŸ’œÐ”Ð¾Ð½Ð°Ñ‚ÐµÐ»Ð»Ð¾)',
  'ðŸ²Ð¢Ñ€Ð¾Ð³ (â¤ï¸Ð Ð°Ñ„Ð°ÑÐ»ÑŒ)',
  'ðŸ¦ŽÐ“ÐµÐºÐºÐ¾Ð½ (ðŸµðŸŽ–ÐžÐ³Ð½ÐµÐ½Ð½Ñ‹Ð¹)',
  'ðŸ‘½Ð§ÑƒÐ¶Ð¾Ð¹ (ðŸµðŸŽ–ÐšÐ°Ð¿Ð¸Ñ‚Ð°Ð½)',
  'ðŸœÐ§ÐµÐ»Ð¾Ð²ÐµÐº-Ð¼ÑƒÑ€Ð°Ð²ÐµÐ¹ (Ð“Ð´Ðµ Ð¾Ð½ Ð±Ð»ÑÐ´ÑŒ?!)',
  'ðŸ™Ð¢ÑƒÐ¼Ð°Ð½Ð½Ð¸Ðº (ðŸµðŸŽ–ðŸŽ–Ð£Ð±Ð¸Ð¹Ñ†Ð°)',
  'ðŸ¦‡ÐœÑ‹ÑˆÑŒ (Ð§ÐµÐ»Ð¾Ð²ÐµÐº)',
  'ðŸ¤¡Ð–Ð¾ÐºÐµÐ¹ (Ð§ÐµÐ³Ð¾ Ñ‚Ñ‹ Ñ‚Ð°ÐºÐ¾Ð¹ ÑÐµÑ€ÑŒÐµÐ·Ð½Ñ‹Ð¹?)',
  'ðŸŠÐšÑ€Ð¾ÐºÑ (ÐšÑ€Ð¾ÐºÐ¾Ð´Ð¸Ð»-Ð¼ÑƒÑ‚Ð°Ð½Ñ‚)',
  'ðŸ±Ð‘Ð°Ð±Ð°-ÐºÐ¾Ñ‚ (ÐÐµ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÐ¹)',
  'ðŸ¤–ÐšÐ¸Ð±Ð¾Ñ€Ð³ (ðŸµðŸµðŸŽ–ÐœÐ¸Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹)',
  'ðŸ¦…ÐšÐ°ÑÐ°Ð´Ð¾Ñ€ (ðŸµðŸµðŸŽ–ÐžÑÐ¾Ð±ÑŒ 185)',
  'ðŸ²Ð¢Ñ€Ð¾Ð³ (ðŸµðŸµðŸŽ–ÐœÐ¸Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹)',
  'ðŸ¦€ÐšÑ€Ð°Ð± (Ð“Ñ€ÑÐ·ÐµÐ²Ð¾Ð¹)',
  'ðŸŒžÐÑ‚Ñ€Ð¾Ð½Ð°Ñ… (ðŸ”¥ÐžÐ³Ð½ÐµÐ½Ð½Ñ‹Ð¹)',
  'ãŠ™ï¸Ð”Ñ€ÐµÐ¼Ð¾Ñ€Ð° (ðŸ”¥Ð”Ð°ÑÐ´Ñ€Ð°)',
  'ðŸ²ÐÐ»Ð´ÑƒÐ¸Ð½ (ðŸ”¥ÐŸÐ¾Ð¶Ð¸Ñ€Ð°Ñ‚ÐµÐ»ÑŒ ÐœÐ¸Ñ€Ð°)',
  'ðŸ•ÐšÐ¸Ð±ÐµÑ€Ð¿ÐµÑ (ðŸ†Ð˜ÑÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹)',
  'ðŸš¨ÐÐ½ÐºÐ»Ð°Ð² (ðŸ†ðŸ†Ð“Ð»Ð°Ð²Ð½Ð¾ÐºÐ¾Ð¼Ð°Ð½Ð´ÑƒÑŽÑ‰Ð¸Ð¹)',
  'ðŸœÐ§ÐµÐ»Ð¾Ð²ÐµÐº-Ð¼ÑƒÑ€Ð°Ð²ÐµÐ¹ (â­ï¸)',
  'ðŸ‘½Ð§ÑƒÐ¶Ð¾Ð¹ (â­ï¸ðŸŒŸâ­ï¸)',
  'ðŸ¦†Ð’Ð°Ð½Ð°Ð¼Ð¸Ð½Ð³Ð¾ (Ð”Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ ÐºÑ€Ð¾Ð²Ð¸, ÑÑƒÐºÐ°!)',
  'ðŸš¨ÐÐ½ÐºÐ»Ð°Ð² (ðŸš¬Ð¡Ð¾Ð»Ð´Ð°Ñ‚)',
  'ðŸ¤–ÐšÐ¸Ð±Ð¾Ñ€Ð³ (ðŸ”±ðŸ”±ðŸ”±Ð¦ÐµÐ½Ñ‚ÑƒÑ€Ð¸Ð¾Ð½)',
  'ðŸ¦†Ð’Ð°Ð½Ð°Ð¼Ð¸Ð½Ð³Ð¾ (ÐŸÐ¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚ ÑÐ²ÑÐ·Ð¸ ÐºÑ€Ð¸Ð¼Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð³Ð¾)',
  'ðŸš¨ÐÐ½ÐºÐ»Ð°Ð² (ðŸš¬Ð­Ð»Ð¸Ñ‚Ð°ðŸš¬)',
  'ðŸš¨ÐÐ½ÐºÐ»Ð°Ð² (ðŸš¬ðŸ”±ðŸ”±Ð•Ð´Ð¸Ð½Ð¸Ñ‡Ð½Ñ‹Ð¹)',
  'ðŸœÐœÑƒÑ€Ð°Ð²ÐµÐ¹ (ðŸš¬Ð“Ð¸Ð³Ð°Ð½Ñ‚)',
  'ðŸœÐ§ÐµÐ»Ð¾Ð²ÐµÐº-Ð¼ÑƒÑ€Ð°Ð²ÐµÐ¹ (Ð­Ñ‚Ð¾ Ð¿Ñ‚Ð¸Ñ†Ð°? Ð­Ñ‚Ð¾ ÑÐ°Ð¼Ð¾Ð»ÐµÑ‚? Ð­Ñ‚Ð¾ Ð¼ÑƒÑ€Ð°Ð²ÐµÐ¹!)',
  'ðŸ¦†Ð’Ð°Ð½Ð°Ð¼Ð¸Ð½Ð³Ð¾ (ÐŸÑ€Ð¸ÐºÐ¸Ð´Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÐºÐ¾Ñ€Ð¾Ð»ÐµÐ¼ Ð¼ÑƒÑ€Ð°Ð²ÑŒÐµÐ²)',
  'ðŸš¨ÐœÑƒÑ€Ð°Ð²ÐµÐ¹-ÐÐ½ÐºÐ»Ð°Ð² (ðŸš¬Ð­Ð»Ð¸Ñ‚Ð°ðŸš¬)',
  'â˜¯ï¸ÐœÑ‹ÑÐ»Ð¸Ñ‚ÐµÐ»ÑŒ (Ð¢Ñ‹ÑÑÑ‡ÐµÐ»ÐµÑ‚Ð½Ð¸Ð¹)',
  'ðŸ™Ð¥ÐµÐ´ÐºÑ€Ð°Ð± (Ð›Ð°Ð¼Ð°Ñ€Ñ€)',
  'ðŸ™Ð¥ÐµÐ´ÐºÑ€Ð°Ð± (Ð“Ð¾Ð½Ð°Ñ€Ñ‡)',
  'ðŸœÐœÑƒÑ€Ð°Ð²ÑŒÐ¸Ð½Ñ‹Ð¹ Ð»ÐµÐ² (ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹)',
  'ðŸš¨ÐÐ»ÑŒÑÐ½Ñ (ðŸš¬Ð¡Ð¾Ð»Ð´Ð°Ñ‚)',
  'ðŸ‘â€ðŸ—¨G-man (ÐÐ¾ÑƒÐ½ÐµÐ¹Ð¼ Ñ ÐºÐµÐ¹ÑÐ¾Ð¼)',
  'ðŸ•ÐœÐ°Ð³Ð¼Ð°Ð´Ð°Ñ€ (Ð“Ð¾Ð½Ñ‡Ð°Ñ Ð½ÐµÐ´Ñ€)',
  'ðŸ”¥Ð“ÐµÐ´Ð´Ð¾Ð½ (Ð‘Ð°Ñ€Ð¾Ð½)',
  'ðŸ²Ð¡ÑƒÐ»ÑŒÑ„ÑƒÑ€Ð¸Ð¾Ð½ (ÐŸÑ€ÐµÐ´Ð²ÐµÑÑ‚Ð½Ð¸Ðº)',
  'ðŸ²ÐœÐ°Ð¶Ð¾Ñ€Ð´Ð¾Ð¼ (Ð­ÐºÐ·ÐµÐºÑƒÑ‚Ð¾Ñ)',
  'ðŸ‘¹Ð Ð°Ð³Ð½Ð°Ñ€Ð¾Ñ (Ð”Ð¸Ñ‚Ñ Ð’Ð¸Ñ‚Ð° Ð¸ Ð¿Ð¾Ð²ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ ÐžÐ³Ð½Ñ)',
];
console.log('START');

Beast.find().then((beasts) => {
  console.log(`Before: ${beasts.length}`);
});

async.forEach(beastsToDelete, (name, next) => {
  Beast.find({
    name,
    isDungeon: false,
  }).then((beasts) => {
    if (beasts.length === 0) {
      next();
    } else {
      async.forEach(beasts, (beast, _next) => {
        beast.remove().then(() => {
          _next();
        });
      }, () => {
        next();
      });
    }
  });
}, () => {
  Beast.find().then((beasts) => {
    console.log(`After: ${beasts.length}`);
    mongoose.disconnect();
  });
});
